@include test-module('oBrandDefine') {
    @include test('Adds new brand variables to a global map') {
        $component1-brand1: (
            'variables': (
                example: blue
            ),
            'supports-variants': (
                'test': true,
                'example': true
            )
        );
        $component1-brand2: (
            'variables': (
            ),
            'supports-variants': (
                'example': true
            )
        );
        $component2-brand1: (
            'variables': (
                other: red
            ),
            'supports-variants': (
                'thing': true
            )
        );
        $component2-brand2: (
            'variables': (
                other: white
            ),
            'supports-variants': (
            )
        );
        @include oBrandDefine('o-component1', 'brand1', $component1-brand1);
        @include oBrandDefine('o-component1', 'brand2', $component1-brand2);
        @include oBrandDefine('o-component2', 'brand1', $component2-brand1);
        @include oBrandDefine('o-component2', 'brand2', $component2-brand2);
        @include assert-equal(map-get($_o-brands, "o-component1"), (
            'brand1': $component1-brand1,
            'brand2': $component1-brand2
        ));
        @include assert-equal(map-get($_o-brands, "o-component2"), (
            'brand1': $component2-brand1,
            'brand2': $component2-brand2
        ));
    }
}

@include test-module('oBrandGet') {
    @include test('Gets a default variable value for a defined brand') {
        $property: oBrandGet($component: 'o-example', $variables: 'example-background');
        @include assert-equal($property, white);
    }

    @include test('Concatenates multiple variables for use in one property value') {
        $property: oBrandGet($component: 'o-example', $variables: (example-border-width example-border-style example-border-color));
        @include assert-equal($property, 1px solid grey);
    }

    @include test('Gets a variable value from a variant') {
        $property: oBrandGet($component: 'o-example', $variables: 'example-background', $from: 'inverse');
        @include assert-equal($property, grey);
    }

    @include test('Gets a variable value from a custom variant') {
        $property: oBrandGet($component: 'o-example', $variables: 'example-background', $from: ('example-background': hotpink));
        @include assert-equal($property, hotpink);
    }

    @include test('Gets null from a variant with no variables defined') {
        $property: oBrandGet($component: 'o-example', $variables: 'example-background', $from: 'compact');
        @include assert-equal($property, null);
    }

    @include test('Gets variables from the default "master" brand if the current brand is not defined.') {
        // Set fake brand.
        $original-brand: $o-brand;
        $o-brand: 'non-existent-brand' !global;
        $property: oBrandGet($component: 'o-example', $variables: 'example-background');
        @include assert-equal($property, pink);
        // Restore brand after test.
        $o-brand: $original-brand !global;
    }
}

@include test-module('oBrandSupportsVariant') {
    @include test('Returns false if a brand does not support the variant') {
        $support: oBrandSupportsVariant($component: 'o-example', $variant: 'unsupported');
        @include assert-equal($support, false);
    }
    @include test('Returns true if a brand does support the variant') {
        $support: oBrandSupportsVariant($component: 'o-example', $variant: 'b2b');
        @include assert-equal($support, true);
    }
}
